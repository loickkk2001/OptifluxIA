<div class="dashboard-container p-4 md:p-6">
  <h1 class="dashboard-title text-2xl md:text-3xl font-bold mb-6">Tableau de Bord</h1>
  
  <!-- Cartes de statistiques -->
  <div class="cards-container grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
    <p-card header="Mes absences planifiées" class="dashboard-card shadow-md rounded-lg">
      <div class="flex items-center justify-between">
        <p class="card-value text-3xl font-semibold">{{stats.plannedAbsences}}</p>
        <i class="pi pi-calendar-minus text-4xl opacity-50"></i>
      </div>
      <p class="text-sm mt-2">Vos absences à venir</p>
    </p-card>

    <p-card header="Tous mes jours travaillés" class="dashboard-card shadow-md rounded-lg">
      <div class="flex items-center justify-between">
        <p class="card-value text-3xl font-semibold">{{stats.workedDays}}</p>
        <i class="pi pi-briefcase text-4xl opacity-50"></i>
      </div>
      <p class="text-sm mt-2">Ce mois (jusqu'à aujourd'hui)</p>
    </p-card>

    <p-card header="Mes jours de travail restants" class="dashboard-card shadow-md rounded-lg">
      <div class="flex items-center justify-between">
        <p class="card-value text-3xl font-semibold">{{stats.remainingDaysOff}}</p>
        <i class="pi pi-calendar text-4xl opacity-50"></i>
      </div>
      <p class="text-sm mt-2">D'ici la fin du mois</p>
    </p-card>

    <p-card header="Mon prochain jour de repos" class="dashboard-card shadow-md rounded-lg">
      <div class="flex items-center justify-between">
        <p class="card-value text-xl font-semibold">{{stats.nextDayOff}}</p>
        <i class="pi pi-clock text-4xl opacity-50"></i>
      </div>
      <p class="text-sm mt-2">Votre prochain jour de repos</p>
    </p-card>
  </div>

  <!-- Calendrier mensuel -->
  
  <p-card header="Votre calendrier mensuel" class="mb-8">
    <div class="grid grid-cols-7 gap-1">
      <div *ngFor="let day of workSchedule" 
           [class.bg-blue-100]="day.isWorking" 
           [class.bg-red-100]="!day.isWorking && !day.isAbsent"
           [class.bg-yellow-100]="day.isAbsent"
           class="p-2 text-center border rounded">
        <div class="font-semibold">{{day.date | date:'d'}}</div>
        <div class="text-xs">
          {{day.isAbsent ? 'Absent' : (day.isWorking ? 'Travail' : 'Repos')}}
        </div>
      </div>
    </div>
    <div class="mt-4 flex gap-4">
      <div class="flex items-center">
        <div class="w-4 h-4 bg-blue-100 mr-2"></div>
        <span class="text-sm">Jours travaillés</span>
      </div>
      <div class="flex items-center">
        <div class="w-4 h-4 bg-red-100 mr-2"></div>
        <span class="text-sm">Jours de repos</span>
      </div>
      <div class="flex items-center">
        <div class="w-4 h-4 bg-yellow-100 mr-2"></div>
        <span class="text-sm">Absence</span>
      </div>
    </div>
  </p-card>

  <div class="mb-8"></div>
  <!-- Graphique -->
  <div class="bg-white p-4 rounded-lg shadow-md mb-6">
    <p-chart type="bar" [data]="chartData" [options]="chartOptions" height="300px"></p-chart>
  </div>

  <!-- Absences à venir -->
  <p-card header="Vos absences à venir" class="mb-6 mt-5">
    <p-table 
      [value]="upcomingAbsences" 
      [paginator]="true" 
      [rows]="5"
      [tableStyle]="{ 'min-width': '50rem' }"
      styleClass="p-datatable-striped"
    >
      <ng-template pTemplate="header">
        <tr>
          <th>Date de début</th>
          <th>Date de fin</th>
          <th>Statut</th>
          <th>Motif</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-absence>
        <tr>
          <td>{{absence.startDate}}</td>
          <td>{{absence.endDate}}</td>
          <td>
            <p-tag 
              [value]="absence.status" 
              [severity]="getBadgeSeverity(absence.status)"
            ></p-tag>
          </td>
          <td>{{absence.reason || 'Non spécifié'}}</td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td [colSpan]="4" class="text-center py-4">
            Aucune absence planifiée
          </td>
        </tr>
      </ng-template>
    </p-table>
  </p-card>

  <p-toast></p-toast>
</div>